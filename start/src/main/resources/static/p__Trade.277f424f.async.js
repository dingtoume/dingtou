(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{KIUL:function(he,A,t){"use strict";t.r(A);var ve=t("bbsP"),U=t("/wGt"),pe=t("+L6B"),D=t("2/Rp"),E=t("tJVT"),b=t("k1fw"),be=t("miYZ"),f=t("tsqr"),p=t("9og8"),ge=t("2qtc"),W=t("kLXV"),Q=t("WmNS"),d=t.n(Q),X=t("xvlK"),g=t("q1tI"),r=t.n(g),y=t("9kvl"),Y=t("tMyG"),z=t("jRje"),Z=t("Qiat"),H=t("ovOe"),x=t.n(H),o=t("jrin"),M=t("yj/a"),$=t("Qurx"),S=t("FJDo"),N=t("VMEa"),q=t("KxXC"),_=t.n(q),ee=function(n){var u,e,i,l;return r.a.createElement(_.a,{visible:n.createModalVisible,onVisibleChange:n.handleModalVisible,title:"\u521B\u5EFA\u8BA2\u5355",onFinish:n.onSubmit},r.a.createElement(N.a.Group,null,r.a.createElement(M.a,{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u5238\u5E02\u573A!"}],options:[{value:"sh",label:"\u4E0A\u4EA4\u6240"},{value:"sz",label:"\u6DF1\u4EA4\u6240"},{value:"fund",label:"\u573A\u5916\u57FA\u91D1"}],width:"sm",name:"market",label:"\u8BC1\u5238\u5E02\u573A"}),r.a.createElement(M.a,{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u5238\u7C7B\u578B!"}],options:[{value:"stock",label:"\u573A\u5185\u8BC1\u5238"},{value:"fund",label:"\u573A\u5916\u57FA\u91D1"}],width:"sm",name:"type",label:"\u8BC1\u5238\u7C7B\u578B"})),r.a.createElement(N.a.Group,null,r.a.createElement($.a,{width:"sm",name:"code",label:"\u8BC1\u5238\u4EE3\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u5238\u4EE3\u7801!"}]}),r.a.createElement($.a,{width:"sm",name:"name",label:"\u8BC1\u5238\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u5238\u540D\u79F0!"}]}),r.a.createElement(S.a,(u={label:"InputNumber",min:0,max:1e8,width:"sm",name:"increment"},Object(o.a)(u,"label","\u5B9A\u6295\u91D1\u989D"),Object(o.a)(u,"placeholder","\u6BCF\u5468\u4E70\u5165\u91D1\u989D(\u5143)"),Object(o.a)(u,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9A\u6295\u91D1\u989D!"}]),u)),r.a.createElement(S.a,(e={label:"InputNumber",min:0,max:10,width:"sm",name:"serviceFeeRate"},Object(o.a)(e,"label","\u8D39\u7387"),Object(o.a)(e,"placeholder","\u5982\u4E07\u5206\u4E4B\u4E00\uFF1A0.0001"),Object(o.a)(e,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u8D39\u7387!"}]),e)),r.a.createElement(S.a,(i={label:"InputNumber",min:0,max:10,width:"sm",name:"minServiceFee"},Object(o.a)(i,"label","\u6700\u5C0F\u670D\u52A1\u8D39"),Object(o.a)(i,"placeholder","\u6700\u5C0F\u670D\u52A1\u8D39\uFF1A0.1\u5143"),Object(o.a)(i,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u5C0F\u670D\u52A1\u8D39!"}]),i)),r.a.createElement(S.a,(l={label:"InputNumber",min:0,max:1e9,width:"sm",name:"minTradeAmount"},Object(o.a)(l,"label","\u6BCF\u624B\u80A1\u6570"),Object(o.a)(l,"placeholder","100/0.1"),Object(o.a)(l,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u6BCF\u624B\u80A1\u6570!"}]),l))))},ae=ee,T=t("t3Un");function te(s){return C.apply(this,arguments)}function C(){return C=Object(p.a)(d.a.mark(function s(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(T.a)("/api/trade/conform",{params:n}));case 1:case"end":return e.stop()}},s)})),C.apply(this,arguments)}function re(s){return F.apply(this,arguments)}function F(){return F=Object(p.a)(d.a.mark(function s(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(T.a)("/api/trade/buy",{method:"POST",data:Object(b.a)(Object(b.a)({},n),{},{method:"post"})}));case 1:case"end":return e.stop()}},s)})),F.apply(this,arguments)}function ne(s){return w.apply(this,arguments)}function w(){return w=Object(p.a)(d.a.mark(function s(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(T.a)("/api/trade/settlement",{params:n}));case 1:case"end":return e.stop()}},s)})),w.apply(this,arguments)}function ue(s){return B.apply(this,arguments)}function B(){return B=Object(p.a)(d.a.mark(function s(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(T.a)("/api/stock/add",{method:"POST",data:Object(b.a)(Object(b.a)({},n),{},{method:"update"})}));case 1:case"end":return e.stop()}},s)})),B.apply(this,arguments)}var le=W.a.confirm,se=function(){var s=Object(p.a)(d.a.mark(function n(u){var e,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=f.default.loading("\u521B\u5EFA\u4E2D..."),a.prev=1,a.next=4,ue(Object(b.a)({},u));case 4:if(i=a.sent,e(),!i.success){a.next=11;break}return f.default.success("\u521B\u5EFA\u6210\u529F"),a.abrupt("return",!0);case 11:return f.default.error("\u521B\u5EFA\u5931\u8D25\uFF1A"+i.message),a.abrupt("return",!1);case 13:a.next=20;break;case 15:return a.prev=15,a.t0=a.catch(1),e(),f.default.error("\u521B\u5EFA\u5931\u8D25!"),a.abrupt("return",!1);case 20:case"end":return a.stop()}},n,null,[[1,15]])}));return function(u){return s.apply(this,arguments)}}(),ie=function(){var s=Object(p.a)(d.a.mark(function n(u){var e,i;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e=f.default.loading("Deleting"),u){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,re({orders:u.map(function(R){return R})});case 6:if(i=a.sent,!i.success){a.next=12;break}return f.default.success("\u4E0B\u5355\u6210\u529F"),a.abrupt("return",!0);case 12:return f.default.error("\u4E0B\u5355\u5931\u8D25\uFF1A"+i.message),a.abrupt("return",!1);case 14:a.next=21;break;case 16:return a.prev=16,a.t0=a.catch(3),e(),f.default.error("\u4E0B\u5355\u5931\u8D25"),a.abrupt("return",!1);case 21:case"end":return a.stop()}},n,null,[[3,16]])}));return function(u){return s.apply(this,arguments)}}(),Oe=function(){var s=Object(p.a)(d.a.mark(function n(u){var e;return d.a.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(e=f.default.loading("Deleting"),u){l.next=3;break}return l.abrupt("return",!0);case 3:return l.prev=3,l.next=6,ne({});case 6:return e(),f.default.success("\u7ED3\u7B97\u6210\u529F"),l.abrupt("return",!0);case 11:return l.prev=11,l.t0=l.catch(3),e(),f.default.error("\u7ED3\u7B97\u5931\u8D25"),l.abrupt("return",!1);case 16:case"end":return l.stop()}},n,null,[[3,11]])}));return function(u){return s.apply(this,arguments)}}(),ce=function(){var n=Object(g.useState)(!1),u=Object(E.a)(n,2),e=u[0],i=u[1],l=Object(g.useState)(!1),a=Object(E.a)(l,2),R=a[0],V=a[1],I=Object(g.useRef)(),de=Object(g.useState)(),P=Object(E.a)(de,2),k=P[0],G=P[1],oe=Object(g.useState)([]),L=Object(E.a)(oe,2),O=L[0],J=L[1],me=Object(y.f)(),fe=[{title:"\u4EE3\u7801",dataIndex:"stockCode",tip:"\u80A1\u7968\u57FA\u91D1\u4EE3\u7801",render:function(c,m){return r.a.createElement("a",{onClick:function(){G(m),V(!0)}},c)}},{title:"\u5E02\u573A",sorter:!0,dataIndex:"stockMarket",hideInSearch:!0,tip:"\u8BC1\u5238\u5E02\u573A"},{title:"\u7C7B\u578B",dataIndex:"stockTypeName",hideInSearch:!0,tip:"\u8BC1\u5238\u7C7B\u578B"},{title:"\u540D\u79F0",dataIndex:"stockName",tip:"\u8BC1\u5238\u540D\u79F0"},{title:"\u64CD\u4F5C",dataIndex:"type",sorter:!0,hideInForm:!0,hideInSearch:!0,renderText:function(c){return c==="BUY"?"\u4E70\u5165":"\u5356\u51FA"}},{title:"\u72B6\u6001",dataIndex:"tradeStatus",sorter:!0,hideInForm:!0,hideInSearch:!0,renderText:function(c){return c==="PROCESSING"?"\u5904\u7406\u4E2D":c==="DONE"?"\u4EA4\u6613\u5B8C\u6210":c}},{title:"\u6301\u6709",hideInSearch:!0,children:[{title:"\u91D1\u989D(\u5143)",sorter:!0,dataIndex:"totalFee",hideInSearch:!0},{title:"\u6570\u91CF(\u80A1)",dataIndex:"totalAmount",sorter:!0,hideInSearch:!0}]},{title:"\u5B9A\u6295",hideInSearch:!0,children:[{title:"\u6570\u91CF(\u5143)",dataIndex:"tradeAmount",sorter:!0,hideInSearch:!0,tip:"\u672C\u6B21\u5B9A\u6295\u4E70\u5165\u6570\u91CF"},{title:"\u91D1\u989D(\u5143)",dataIndex:"tradeFee",sorter:!0,hideInSearch:!0,tip:"\u672C\u6B21\u5B9A\u6295\u9884\u8BA1\u4E70\u5165\u91D1\u989D"},{title:"\u8D39\u7528(\u5143)",dataIndex:"tradeServiceFee",sorter:!0,hideInSearch:!0,tip:"\u672C\u6B21\u5B9A\u6295\u9884\u8BA1\u4E70\u5165\u8D39\u7528"}]}],K;return r.a.createElement(Y.a,null,r.a.createElement(Z.a,{bordered:!0,pagination:!1,headerTitle:me.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:I,rowKey:"outId",search:{labelWidth:120},toolBarRender:function(){return[r.a.createElement(D.a,{type:"primary",key:"primary",onClick:function(){i(!0)}},r.a.createElement(X.a,null)," ",r.a.createElement(y.a,{id:"pages.searchTable.new",defaultMessage:"New"}))]},request:function(c,m,v){return te(Object(b.a)(Object(b.a)({},c),{},{sorter:m,filter:v}))},columns:fe,rowSelection:{onChange:function(c,m){J(m)}}}),(O==null?void 0:O.length)>0&&r.a.createElement(z.a,{extra:r.a.createElement("div",null,r.a.createElement(y.a,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",r.a.createElement("a",{style:{fontWeight:600}},O.length)," ",r.a.createElement(y.a,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",r.a.createElement("span",null," \u603B\u6295\u5165\u91D1\u989D\uFF1A",K=O.reduce(function(h,c){return h+parseFloat(c.totalFee)},0),"\u5143(",K/1e4,"\u4E07)"))},r.a.createElement(D.a,{onClick:function(){return le({title:"\u786E\u8BA4\u4E0B\u5355",content:"are you ok ?",onOk:function(){var m,v;ie(O),J([]),(m=I.current)===null||m===void 0||(v=m.reloadAndRest)===null||v===void 0||v.call(m)},onCancel:function(){console.log("Cancel")}})}},"\u4E0B\u5355")),r.a.createElement(ae,{createModalVisible:e,handleModalVisible:i,onSubmit:function(){var h=Object(p.a)(d.a.mark(function c(m){var v;return d.a.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return j.next=2,se(m);case 2:v=j.sent,v&&(i(!1),I.current&&I.current.reload());case 4:case"end":return j.stop()}},c)}));return function(c){return h.apply(this,arguments)}}()}),r.a.createElement(U.a,{width:600,visible:R,onClose:function(){G(void 0),V(!1)},closable:!1},r.a.createElement(x.a,{name:"data",displayDataTypes:!1,src:k||{}})))},je=A.default=ce}}]);
