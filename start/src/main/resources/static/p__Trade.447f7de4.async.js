(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{KIUL:function(Be,G,t){"use strict";t.r(G);var Me=t("bbsP"),q=t("/wGt"),Ae=t("DYRE"),_=t("zeV3"),Re=t("+L6B"),A=t("2/Rp"),De=t("giR+"),ee=t("fyUT"),T=t("tJVT"),p=t("k1fw"),ke=t("miYZ"),h=t("tsqr"),O=t("9og8"),Ve=t("2qtc"),ae=t("kLXV"),te=t("WmNS"),m=t.n(te),re=t("xvlK"),j=t("q1tI"),n=t.n(j),I=t("9kvl"),ne=t("tMyG"),ue=t("jRje"),le=t("Qiat"),se=t("ovOe"),ie=t.n(se),g=t("jrin"),L=t("yj/a"),R=t("Qurx"),F=t("FJDo"),J=t("VMEa"),de=t("KxXC"),ce=t.n(de),oe=function(u){var l,e,o,s;return n.a.createElement(ce.a,{visible:u.createModalVisible,onVisibleChange:u.handleModalVisible,title:"\u521B\u5EFA\u8BA2\u5355",onFinish:u.onSubmit},n.a.createElement(J.a.Group,null,n.a.createElement(L.a,{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u5238\u5E02\u573A!"}],options:[{value:"sh",label:"\u4E0A\u4EA4\u6240"},{value:"sz",label:"\u6DF1\u4EA4\u6240"},{value:"fund",label:"\u573A\u5916\u57FA\u91D1"}],width:"sm",name:"market",label:"\u8BC1\u5238\u5E02\u573A"}),n.a.createElement(L.a,{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BC1\u5238\u7C7B\u578B!"}],options:[{value:"stock",label:"\u573A\u5185\u8BC1\u5238"},{value:"fund",label:"\u573A\u5916\u57FA\u91D1"}],width:"sm",name:"type",label:"\u8BC1\u5238\u7C7B\u578B"})),n.a.createElement(J.a.Group,null,n.a.createElement(R.a,{width:"sm",name:"code",label:"\u8BC1\u5238\u4EE3\u7801",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u5238\u4EE3\u7801!"}]}),n.a.createElement(R.a,{width:"sm",name:"name",label:"\u8BC1\u5238\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u5238\u540D\u79F0!"}]}),n.a.createElement(R.a,{width:"sm",name:"category",label:"\u5206\u7C7B",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BC1\u5238\u5206\u7C7B!"}]}),n.a.createElement(F.a,(l={label:"InputNumber",min:0,max:1e8,width:"sm",name:"increment"},Object(g.a)(l,"label","\u5B9A\u6295\u91D1\u989D"),Object(g.a)(l,"placeholder","\u6BCF\u5468\u4E70\u5165\u91D1\u989D(\u5143)"),Object(g.a)(l,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u5B9A\u6295\u91D1\u989D!"}]),l)),n.a.createElement(F.a,(e={label:"InputNumber",min:0,max:10,width:"sm",name:"serviceFeeRate"},Object(g.a)(e,"label","\u8D39\u7387"),Object(g.a)(e,"placeholder","\u5982\u4E07\u5206\u4E4B\u4E00\uFF1A0.0001"),Object(g.a)(e,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u8D39\u7387!"}]),e)),n.a.createElement(F.a,(o={label:"InputNumber",min:0,max:10,width:"sm",name:"minServiceFee"},Object(g.a)(o,"label","\u6700\u5C0F\u670D\u52A1\u8D39"),Object(g.a)(o,"placeholder","\u6700\u5C0F\u670D\u52A1\u8D39\uFF1A0.1\u5143"),Object(g.a)(o,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u6700\u5C0F\u670D\u52A1\u8D39!"}]),o)),n.a.createElement(F.a,(s={label:"InputNumber",min:0,max:1e9,width:"sm",name:"minTradeAmount"},Object(g.a)(s,"label","\u6BCF\u624B\u80A1\u6570"),Object(g.a)(s,"placeholder","100/0.1"),Object(g.a)(s,"rules",[{required:!0,message:"\u8BF7\u8F93\u5165\u6BCF\u624B\u80A1\u6570!"}]),s))))},me=oe,S=t("t3Un");function fe(i){return D.apply(this,arguments)}function D(){return D=Object(O.a)(m.a.mark(function i(u){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)("/api/trade/conform",{params:u}));case 1:case"end":return e.stop()}},i)})),D.apply(this,arguments)}function he(i){return k.apply(this,arguments)}function k(){return k=Object(O.a)(m.a.mark(function i(u){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)("/api/trade/buy",{method:"POST",data:Object(p.a)(Object(p.a)({},u),{},{method:"post"})}));case 1:case"end":return e.stop()}},i)})),k.apply(this,arguments)}function ve(i){return V.apply(this,arguments)}function V(){return V=Object(O.a)(m.a.mark(function i(u){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)("/api/trade/update",{method:"POST",data:Object(p.a)(Object(p.a)({},u),{},{method:"post"})}));case 1:case"end":return e.stop()}},i)})),V.apply(this,arguments)}function pe(i){return N.apply(this,arguments)}function N(){return N=Object(O.a)(m.a.mark(function i(u){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)("/api/trade/settlement",{params:u}));case 1:case"end":return e.stop()}},i)})),N.apply(this,arguments)}function be(i){return $.apply(this,arguments)}function $(){return $=Object(O.a)(m.a.mark(function i(u){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)("/api/stock/add",{method:"POST",data:Object(p.a)(Object(p.a)({},u),{},{method:"update"})}));case 1:case"end":return e.stop()}},i)})),$.apply(this,arguments)}var ge=t("bRQS"),ye=ae.a.confirm,Oe=function(){var i=Object(O.a)(m.a.mark(function u(l){var e,o;return m.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=h.default.loading("\u521B\u5EFA\u4E2D..."),r.prev=1,r.next=4,be(Object(p.a)({},l));case 4:if(o=r.sent,e(),!o.success){r.next=11;break}return h.default.success("\u521B\u5EFA\u6210\u529F"),r.abrupt("return",!0);case 11:return h.default.error("\u521B\u5EFA\u5931\u8D25\uFF1A"+o.message),r.abrupt("return",!1);case 13:r.next=20;break;case 15:return r.prev=15,r.t0=r.catch(1),e(),h.default.error("\u521B\u5EFA\u5931\u8D25!"),r.abrupt("return",!1);case 20:case"end":return r.stop()}},u,null,[[1,15]])}));return function(l){return i.apply(this,arguments)}}(),je=function(){var i=Object(O.a)(m.a.mark(function u(l){var e,o;return m.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e=h.default.loading("\u4E0B\u5355\u4E2D..."),l){r.next=3;break}return r.abrupt("return",!0);case 3:return r.prev=3,r.next=6,he({orders:l.map(function(w){return w})});case 6:if(o=r.sent,!o.success){r.next=12;break}return h.default.success("\u4E0B\u5355\u6210\u529F"),r.abrupt("return",!0);case 12:return h.default.error("\u4E0B\u5355\u5931\u8D25\uFF1A"+o.message),r.abrupt("return",!1);case 14:r.next=21;break;case 16:return r.prev=16,r.t0=r.catch(3),e(),h.default.error("\u4E0B\u5355\u5931\u8D25"),r.abrupt("return",!1);case 21:case"end":return r.stop()}},u,null,[[3,16]])}));return function(l){return i.apply(this,arguments)}}(),Ne=function(){var i=Object(O.a)(m.a.mark(function u(l){var e;return m.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(e=h.default.loading("\u7ED3\u7B97\u4E2D..."),l){s.next=3;break}return s.abrupt("return",!0);case 3:return s.prev=3,s.next=6,pe({});case 6:return e(),h.default.success("\u7ED3\u7B97\u6210\u529F"),s.abrupt("return",!0);case 11:return s.prev=11,s.t0=s.catch(3),e(),h.default.error("\u7ED3\u7B97\u5931\u8D25"),s.abrupt("return",!1);case 16:case"end":return s.stop()}},u,null,[[3,11]])}));return function(l){return i.apply(this,arguments)}}(),Ee=function(){var i=Object(O.a)(m.a.mark(function u(l,e,o){var s,r;return m.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(s=h.default.loading("\u66F4\u65B0\u4E2D..."),l){f.next=3;break}return f.abrupt("return",!0);case 3:return f.prev=3,f.next=6,ve({order:l,dataIndex:e,newValue:o});case 6:return r=f.sent,s(),h.default.success("\u66F4\u65B0\u6210\u529F"),f.abrupt("return",!0);case 12:return f.prev=12,f.t0=f.catch(3),s(),h.default.error("\u66F4\u65B0\u5931\u8D25"),f.abrupt("return",!1);case 17:case"end":return f.stop()}},u,null,[[3,12]])}));return function(l,e,o){return i.apply(this,arguments)}}(),Te=function(){var u=Object(j.useState)(!1),l=Object(T.a)(u,2),e=l[0],o=l[1],s=Object(j.useState)(!1),r=Object(T.a)(s,2),w=r[0],f=r[1],C=Object(j.useRef)(),Se=Object(j.useState)(),K=Object(T.a)(Se,2),z=K[0],Q=K[1],Ce=Object(j.useState)([]),W=Object(T.a)(Ce,2),E=W[0],Y=W[1],Ie=Object(j.useState)([]),X=Object(T.a)(Ie,2),B=X[0],P=X[1],Fe=Object(I.f)(),x=function(a){a=a.toString().replace(/\$|\,/g,""),isNaN(a)&&(a="0");var d=a==(a=Math.abs(a));a=Math.floor(a*100+.50000000001);var c=a%100;a=Math.floor(a/100).toString(),c<10&&(c="0"+c);for(var y=0;y<Math.floor((a.length-(1+y))/3);y++)a=a.substring(0,a.length-(4*y+3))+","+a.substring(a.length-(4*y+3));return(d?"":"-")+a+"."+c},Z=function(a,d){var c=d[a.dataIndex];return(B==null?void 0:B.index)===a.dataIndex&&B.outId===d.outId?n.a.createElement(_.b,null,n.a.createElement(ee.a,{min:0,defaultValue:c,onChange:function(b){c=b}}),n.a.createElement(A.a,{size:"small",shape:"circle",icon:n.a.createElement(ge.a,null),onClick:function(){var b=Ee(d,a.dataIndex,c);if(b){var M,U;P([]),(M=C.current)===null||M===void 0||(U=M.reloadAndRest)===null||U===void 0||U.call(M)}}})):a.valueType==="money"?n.a.createElement("a",{onClick:function(){return P(Object(p.a)(Object(p.a)({},d),{},{index:a.dataIndex}))}},"\xA5",x(c)):n.a.createElement("a",{onClick:function(){return P(Object(p.a)(Object(p.a)({},d),{},{index:a.dataIndex}))}},x(c))},we=[{title:"\u4EE3\u7801",dataIndex:"stockCode",tip:"\u80A1\u7968\u57FA\u91D1\u4EE3\u7801",render:function(a,d){return n.a.createElement("a",{onClick:function(){Q(d),f(!0)}},a)}},{title:"\u5E02\u573A",sorter:!0,dataIndex:"stock&marketName",hideInSearch:!0,tip:"\u8BC1\u5238\u5E02\u573A"},{title:"\u7C7B\u578B",dataIndex:"stock&typeName",hideInSearch:!0,tip:"\u8BC1\u5238\u7C7B\u578B"},{title:"\u540D\u79F0",dataIndex:"stock&name",tip:"\u8BC1\u5238\u540D\u79F0"},{title:"\u64CD\u4F5C",dataIndex:"type",sorter:!0,hideInForm:!0,hideInSearch:!0,renderText:function(a){return a==="BUY"?"\u4E70\u5165":"\u5356\u51FA"}},{title:"\u6301\u6709",hideInSearch:!0,children:[{title:"\u91D1\u989D(\u5143)",sorter:!0,dataIndex:"stock&totalFee",hideInSearch:!0,valueType:"money",render:function(a,d,c,y,b){return Z(b,d)}},{title:"\u6570\u91CF(\u80A1)",dataIndex:"stock&amount",sorter:!0,hideInSearch:!0,valueType:"digit",render:function(a,d,c,y,b){return Z(b,d)}}]},{title:"\u5B9A\u6295",hideInSearch:!0,children:[{title:"\u6570\u91CF(\u80A1)",dataIndex:"tradeAmount",sorter:!0,hideInSearch:!0,valueType:"digit",tip:"\u672C\u6B21\u5B9A\u6295\u4E70\u5165\u6570\u91CF"},{title:"\u91D1\u989D(\u5143)",dataIndex:"tradeFee",sorter:!0,hideInSearch:!0,valueType:"money",tip:"\u672C\u6B21\u5B9A\u6295\u9884\u8BA1\u4E70\u5165\u91D1\u989D"},{title:"\u8D39\u7528(\u5143)",dataIndex:"tradeServiceFee",sorter:!0,hideInSearch:!0,valueType:"money",tip:"\u672C\u6B21\u5B9A\u6295\u9884\u8BA1\u4E70\u5165\u8D39\u7528"}]}],H;return n.a.createElement(ne.a,null,n.a.createElement(le.a,{bordered:!0,pagination:!1,headerTitle:Fe.formatMessage({id:"pages.searchTable.title",defaultMessage:"Enquiry form"}),actionRef:C,rowKey:"outId",search:{labelWidth:120},toolBarRender:function(){return[n.a.createElement(A.a,{type:"primary",key:"primary",onClick:function(){o(!0)}},n.a.createElement(re.a,null)," ",n.a.createElement(I.a,{id:"pages.searchTable.new",defaultMessage:"New"}))]},request:function(a,d,c){return fe(Object(p.a)(Object(p.a)({},a),{},{sorter:d,filter:c}))},columns:we,rowSelection:{onChange:function(a,d){Y(d)}}}),(E==null?void 0:E.length)>0&&n.a.createElement(ue.a,{extra:n.a.createElement("div",null,n.a.createElement(I.a,{id:"pages.searchTable.chosen",defaultMessage:"Chosen"})," ",n.a.createElement("a",{style:{fontWeight:600}},E.length)," ",n.a.createElement(I.a,{id:"pages.searchTable.item",defaultMessage:"\u9879"}),"\xA0\xA0",n.a.createElement("span",null," \u603B\u6295\u5165\u91D1\u989D\uFF1A",H=E.reduce(function(v,a){return v+parseFloat(a.totalFee)},0),"\u5143(",H/1e4,"\u4E07)"))},n.a.createElement(A.a,{onClick:function(){return ye({title:"\u786E\u8BA4\u4E0B\u5355",content:"are you ok ?",onOk:function(){var d,c;je(E),Y([]),(d=C.current)===null||d===void 0||(c=d.reloadAndRest)===null||c===void 0||c.call(d)},onCancel:function(){console.log("Cancel")}})}},"\u4E0B\u5355")),n.a.createElement(me,{createModalVisible:e,handleModalVisible:o,onSubmit:function(){var v=Object(O.a)(m.a.mark(function a(d){var c;return m.a.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return b.next=2,Oe(d);case 2:c=b.sent,c&&(o(!1),C.current&&C.current.reload());case 4:case"end":return b.stop()}},a)}));return function(a){return v.apply(this,arguments)}}()}),n.a.createElement(q.a,{width:600,visible:w,onClose:function(){Q(void 0),f(!1)},closable:!1},n.a.createElement(ie.a,{name:"data",displayDataTypes:!1,src:z||{}})))},$e=G.default=Te}}]);
